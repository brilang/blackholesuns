"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const immutable_1 = require("immutable");
const common_1 = require("common");
/*
 * Demonstrates finding best route when there are multiple possible starting points.
 */
//const POILuberndPloygi = coordinates("0AD5:007C:03AB:0065");
//const POIHusker = coordinates("0872:007C:0108:01F1");
const allBases = immutable_1.List([
    { label: "Hermit's Home", coords: common_1.coordinates("0164:007E:0596:0021") },
    { label: "Hermit's Lost Diplos", coords: common_1.coordinates("0163:007E:0595:01DE") },
    { label: "Gek Shrine [700K]", coords: common_1.coordinates("0B39:007C:01FD:0079") },
    { label: "Vykeen Shrine [800k]", coords: common_1.coordinates("0DCD:0082:0D18:0010") },
    {
        coords: common_1.coordinates("042F:0078:0D55:003C"),
        label: "Hermit's Haulers at the Hub",
    },
    {
        coords: common_1.coordinates("0476:0080:0D42:01EB"),
        label: "Hermit's Big Boy Base",
    },
    { label: "Glitching Moon Mine", coords: common_1.coordinates("00A2:0080:0550:00FD") },
]);
const newLennon = {
    coords: common_1.coordinates("042F:0079:0D55:006A"),
    label: "New Lennon",
};
const dopeLordConfederacy = {
    coords: common_1.coordinates("0804:007B:0804:008B"),
    label: "The Dopelord Confederacy",
};
const pilgrimStar = {
    coords: common_1.coordinates("064A:0082:01B9:009A"),
    label: "The Pilgrim Star",
};
// const platform = Platform.PC;
const galaxy = "01 Euclid";
const allHops = common_1.validHops()
    .filter(hop => hop.platform === common_1.Platform.PC || hop.platform === common_1.Platform.XBOX)
    .filter(hop => hop.galaxy === galaxy);
async function main() {
    //const start = pilgrimStar;
    const start = { label: "an exit point", coords: common_1.coordinates("093E:007D:0966:006D") };
    //const start = { label: "Hermit's Home", coords: coordinates("0164:007E:0596:0021") };
    const dest = {
        coords: common_1.coordinates("042F:0079:0D55:006A"),
        label: "New Lennon",
    };
    //const dest = dopeLordConfederacy;
    const status = { cancelled: false, tries: 0 };
    const ta = new common_1.TripAdvisor(common_1.routeCalculator(allHops, 2000, "time", 0.93), start, dest, status);
    const r = await ta.route();
    console.log(r.start);
    console.log(r.score);
    console.log(r.destination);
    console.log(r.hops.toArray());
    await ta.explain();
}
main().catch(error => {
    console.error(`${error}`);
    process.exit(1);
});
// const best: List<TripAdvisor> = allBases
//     .map(start => {
//         return new TripAdvisor(new RouteCalculator(allHops), start, destination);
//     });
//     const x = Promise.all(best.map(ta => ta.route())).then(routes => {
//        const ta =  List(routes).minBy(route => route.score);
//     }).catch(error => console.log(`ERROR: ${error}`));
//     // .map(ta => {
//     //     return ta.route();
//     // })!;
// best.explain();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3JvdXRlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHlDQUFpQztBQUNqQyxtQ0FBcUg7QUFFckg7O0dBRUc7QUFFSCw4REFBOEQ7QUFDOUQsdURBQXVEO0FBRXZELE1BQU0sUUFBUSxHQUFvQixnQkFBSSxDQUFDO0lBQ25DLEVBQUUsS0FBSyxFQUFFLGVBQWUsRUFBRSxNQUFNLEVBQUUsb0JBQVcsQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO0lBQ3RFLEVBQUUsS0FBSyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sRUFBRSxvQkFBVyxDQUFDLHFCQUFxQixDQUFDLEVBQUU7SUFDN0UsRUFBRSxLQUFLLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxFQUFFLG9CQUFXLENBQUMscUJBQXFCLENBQUMsRUFBRTtJQUMxRSxFQUFFLEtBQUssRUFBRSxzQkFBc0IsRUFBRSxNQUFNLEVBQUUsb0JBQVcsQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO0lBQzdFO1FBQ0ksTUFBTSxFQUFFLG9CQUFXLENBQUMscUJBQXFCLENBQUM7UUFDMUMsS0FBSyxFQUFFLDZCQUE2QjtLQUN2QztJQUNEO1FBQ0ksTUFBTSxFQUFFLG9CQUFXLENBQUMscUJBQXFCLENBQUM7UUFDMUMsS0FBSyxFQUFFLHVCQUF1QjtLQUNqQztJQUNELEVBQUUsS0FBSyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sRUFBRSxvQkFBVyxDQUFDLHFCQUFxQixDQUFDLEVBQUU7Q0FDL0UsQ0FBQyxDQUFDO0FBRUgsTUFBTSxTQUFTLEdBQWM7SUFDekIsTUFBTSxFQUFFLG9CQUFXLENBQUMscUJBQXFCLENBQUM7SUFDMUMsS0FBSyxFQUFFLFlBQVk7Q0FDdEIsQ0FBQztBQUVGLE1BQU0sbUJBQW1CLEdBQWM7SUFDbkMsTUFBTSxFQUFFLG9CQUFXLENBQUMscUJBQXFCLENBQUM7SUFDMUMsS0FBSyxFQUFFLDBCQUEwQjtDQUNwQyxDQUFDO0FBRUYsTUFBTSxXQUFXLEdBQWM7SUFDM0IsTUFBTSxFQUFFLG9CQUFXLENBQUMscUJBQXFCLENBQUM7SUFDMUMsS0FBSyxFQUFFLGtCQUFrQjtDQUM1QixDQUFDO0FBRUYsZ0NBQWdDO0FBQ2hDLE1BQU0sTUFBTSxHQUFHLFdBQVcsQ0FBQztBQUUzQixNQUFNLE9BQU8sR0FBVSxrQkFBUyxFQUFFO0tBQzdCLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEtBQUssaUJBQVEsQ0FBQyxFQUFFLElBQUksR0FBRyxDQUFDLFFBQVEsS0FBSyxpQkFBUSxDQUFDLElBQUksQ0FBQztLQUM3RSxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxLQUFLLE1BQU0sQ0FBQyxDQUFDO0FBRTFDLEtBQUssVUFBVSxJQUFJO0lBQ2YsNEJBQTRCO0lBQzVCLE1BQU0sS0FBSyxHQUFHLEVBQUUsS0FBSyxFQUFFLGVBQWUsRUFBRSxNQUFNLEVBQUUsb0JBQVcsQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFLENBQUM7SUFDckYsdUZBQXVGO0lBRXZGLE1BQU0sSUFBSSxHQUFHO1FBQ1QsTUFBTSxFQUFFLG9CQUFXLENBQUMscUJBQXFCLENBQUM7UUFDMUMsS0FBSyxFQUFFLFlBQVk7S0FDdEIsQ0FBQztJQUNGLG1DQUFtQztJQUVuQyxNQUFNLE1BQU0sR0FBZ0IsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUUzRCxNQUFNLEVBQUUsR0FBRyxJQUFJLG9CQUFXLENBQUMsd0JBQWUsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRTlGLE1BQU0sQ0FBQyxHQUFHLE1BQU0sRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBRTNCLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3JCLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3JCLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQzNCLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBRTlCLE1BQU0sRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ3ZCLENBQUM7QUFFRCxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUU7SUFDakIsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDMUIsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwQixDQUFDLENBQUMsQ0FBQztBQUVILDJDQUEyQztBQUMzQyxzQkFBc0I7QUFDdEIsb0ZBQW9GO0FBQ3BGLFVBQVU7QUFFVix5RUFBeUU7QUFDekUsK0RBQStEO0FBQy9ELHlEQUF5RDtBQUN6RCxzQkFBc0I7QUFDdEIsZ0NBQWdDO0FBQ2hDLGNBQWM7QUFFZCxrQkFBa0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMaXN0IH0gZnJvbSBcImltbXV0YWJsZVwiO1xuaW1wb3J0IHsgY29vcmRpbmF0ZXMsIFBsYXRmb3JtLCByb3V0ZUNhbGN1bGF0b3IsIElFbmRQb2ludCwgSVRyaXBTdGF0dXMsIFRyaXBBZHZpc29yLCB2YWxpZEhvcHMsIEhvcCB9IGZyb20gXCJjb21tb25cIjtcblxuLypcbiAqIERlbW9uc3RyYXRlcyBmaW5kaW5nIGJlc3Qgcm91dGUgd2hlbiB0aGVyZSBhcmUgbXVsdGlwbGUgcG9zc2libGUgc3RhcnRpbmcgcG9pbnRzLlxuICovXG5cbi8vY29uc3QgUE9JTHViZXJuZFBsb3lnaSA9IGNvb3JkaW5hdGVzKFwiMEFENTowMDdDOjAzQUI6MDA2NVwiKTtcbi8vY29uc3QgUE9JSHVza2VyID0gY29vcmRpbmF0ZXMoXCIwODcyOjAwN0M6MDEwODowMUYxXCIpO1xuXG5jb25zdCBhbGxCYXNlczogTGlzdDxJRW5kUG9pbnQ+ID0gTGlzdChbXG4gICAgeyBsYWJlbDogXCJIZXJtaXQncyBIb21lXCIsIGNvb3JkczogY29vcmRpbmF0ZXMoXCIwMTY0OjAwN0U6MDU5NjowMDIxXCIpIH0sXG4gICAgeyBsYWJlbDogXCJIZXJtaXQncyBMb3N0IERpcGxvc1wiLCBjb29yZHM6IGNvb3JkaW5hdGVzKFwiMDE2MzowMDdFOjA1OTU6MDFERVwiKSB9LFxuICAgIHsgbGFiZWw6IFwiR2VrIFNocmluZSBbNzAwS11cIiwgY29vcmRzOiBjb29yZGluYXRlcyhcIjBCMzk6MDA3QzowMUZEOjAwNzlcIikgfSxcbiAgICB7IGxhYmVsOiBcIlZ5a2VlbiBTaHJpbmUgWzgwMGtdXCIsIGNvb3JkczogY29vcmRpbmF0ZXMoXCIwRENEOjAwODI6MEQxODowMDEwXCIpIH0sXG4gICAge1xuICAgICAgICBjb29yZHM6IGNvb3JkaW5hdGVzKFwiMDQyRjowMDc4OjBENTU6MDAzQ1wiKSxcbiAgICAgICAgbGFiZWw6IFwiSGVybWl0J3MgSGF1bGVycyBhdCB0aGUgSHViXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGNvb3JkczogY29vcmRpbmF0ZXMoXCIwNDc2OjAwODA6MEQ0MjowMUVCXCIpLFxuICAgICAgICBsYWJlbDogXCJIZXJtaXQncyBCaWcgQm95IEJhc2VcIixcbiAgICB9LFxuICAgIHsgbGFiZWw6IFwiR2xpdGNoaW5nIE1vb24gTWluZVwiLCBjb29yZHM6IGNvb3JkaW5hdGVzKFwiMDBBMjowMDgwOjA1NTA6MDBGRFwiKSB9LFxuXSk7XG5cbmNvbnN0IG5ld0xlbm5vbjogSUVuZFBvaW50ID0ge1xuICAgIGNvb3JkczogY29vcmRpbmF0ZXMoXCIwNDJGOjAwNzk6MEQ1NTowMDZBXCIpLFxuICAgIGxhYmVsOiBcIk5ldyBMZW5ub25cIixcbn07XG5cbmNvbnN0IGRvcGVMb3JkQ29uZmVkZXJhY3k6IElFbmRQb2ludCA9IHtcbiAgICBjb29yZHM6IGNvb3JkaW5hdGVzKFwiMDgwNDowMDdCOjA4MDQ6MDA4QlwiKSxcbiAgICBsYWJlbDogXCJUaGUgRG9wZWxvcmQgQ29uZmVkZXJhY3lcIixcbn07XG5cbmNvbnN0IHBpbGdyaW1TdGFyOiBJRW5kUG9pbnQgPSB7XG4gICAgY29vcmRzOiBjb29yZGluYXRlcyhcIjA2NEE6MDA4MjowMUI5OjAwOUFcIiksXG4gICAgbGFiZWw6IFwiVGhlIFBpbGdyaW0gU3RhclwiLFxufTtcblxuLy8gY29uc3QgcGxhdGZvcm0gPSBQbGF0Zm9ybS5QQztcbmNvbnN0IGdhbGF4eSA9IFwiMDEgRXVjbGlkXCI7XG5cbmNvbnN0IGFsbEhvcHM6IEhvcFtdID0gdmFsaWRIb3BzKClcbiAgICAuZmlsdGVyKGhvcCA9PiBob3AucGxhdGZvcm0gPT09IFBsYXRmb3JtLlBDIHx8IGhvcC5wbGF0Zm9ybSA9PT0gUGxhdGZvcm0uWEJPWClcbiAgICAuZmlsdGVyKGhvcCA9PiBob3AuZ2FsYXh5ID09PSBnYWxheHkpO1xuXG5hc3luYyBmdW5jdGlvbiBtYWluKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vY29uc3Qgc3RhcnQgPSBwaWxncmltU3RhcjtcbiAgICBjb25zdCBzdGFydCA9IHsgbGFiZWw6IFwiYW4gZXhpdCBwb2ludFwiLCBjb29yZHM6IGNvb3JkaW5hdGVzKFwiMDkzRTowMDdEOjA5NjY6MDA2RFwiKSB9O1xuICAgIC8vY29uc3Qgc3RhcnQgPSB7IGxhYmVsOiBcIkhlcm1pdCdzIEhvbWVcIiwgY29vcmRzOiBjb29yZGluYXRlcyhcIjAxNjQ6MDA3RTowNTk2OjAwMjFcIikgfTtcblxuICAgIGNvbnN0IGRlc3QgPSB7XG4gICAgICAgIGNvb3JkczogY29vcmRpbmF0ZXMoXCIwNDJGOjAwNzk6MEQ1NTowMDZBXCIpLFxuICAgICAgICBsYWJlbDogXCJOZXcgTGVubm9uXCIsXG4gICAgfTtcbiAgICAvL2NvbnN0IGRlc3QgPSBkb3BlTG9yZENvbmZlZGVyYWN5O1xuXG4gICAgY29uc3Qgc3RhdHVzOiBJVHJpcFN0YXR1cyA9IHsgY2FuY2VsbGVkOiBmYWxzZSwgdHJpZXM6IDAgfTtcblxuICAgIGNvbnN0IHRhID0gbmV3IFRyaXBBZHZpc29yKHJvdXRlQ2FsY3VsYXRvcihhbGxIb3BzLCAyMDAwLCBcInRpbWVcIiwgMC45MyksIHN0YXJ0LCBkZXN0LCBzdGF0dXMpO1xuXG4gICAgY29uc3QgciA9IGF3YWl0IHRhLnJvdXRlKCk7XG5cbiAgICBjb25zb2xlLmxvZyhyLnN0YXJ0KTtcbiAgICBjb25zb2xlLmxvZyhyLnNjb3JlKTtcbiAgICBjb25zb2xlLmxvZyhyLmRlc3RpbmF0aW9uKTtcbiAgICBjb25zb2xlLmxvZyhyLmhvcHMudG9BcnJheSgpKTtcblxuICAgIGF3YWl0IHRhLmV4cGxhaW4oKTtcbn1cblxubWFpbigpLmNhdGNoKGVycm9yID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGAke2Vycm9yfWApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbn0pO1xuXG4vLyBjb25zdCBiZXN0OiBMaXN0PFRyaXBBZHZpc29yPiA9IGFsbEJhc2VzXG4vLyAgICAgLm1hcChzdGFydCA9PiB7XG4vLyAgICAgICAgIHJldHVybiBuZXcgVHJpcEFkdmlzb3IobmV3IFJvdXRlQ2FsY3VsYXRvcihhbGxIb3BzKSwgc3RhcnQsIGRlc3RpbmF0aW9uKTtcbi8vICAgICB9KTtcblxuLy8gICAgIGNvbnN0IHggPSBQcm9taXNlLmFsbChiZXN0Lm1hcCh0YSA9PiB0YS5yb3V0ZSgpKSkudGhlbihyb3V0ZXMgPT4ge1xuLy8gICAgICAgIGNvbnN0IHRhID0gIExpc3Qocm91dGVzKS5taW5CeShyb3V0ZSA9PiByb3V0ZS5zY29yZSk7XG4vLyAgICAgfSkuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coYEVSUk9SOiAke2Vycm9yfWApKTtcbi8vICAgICAvLyAubWFwKHRhID0+IHtcbi8vICAgICAvLyAgICAgcmV0dXJuIHRhLnJvdXRlKCk7XG4vLyAgICAgLy8gfSkhO1xuXG4vLyBiZXN0LmV4cGxhaW4oKTtcbiJdfQ==